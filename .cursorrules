# Правила проекта для Cursor

## Документация

- Все файлы инструкций с расширением `.md` должны находиться в папке `docs/`
- Имена файлов в папке `docs/` должны начинаться с номера в формате `01_`, `02_`, `03_` и т.д.
- Нумерация файлов должна соответствовать времени их создания (от старых к новым)

## Работа с базой данных

**КРИТИЧЕСКИ ВАЖНО: При работе с базой данных PostgreSQL ВСЕГДА используй MCP сервер, а НЕ другие способы.**

### Строгие правила:

1. **ЗАПРЕЩЕНО использовать:**
   - ❌ Прямые SQL запросы через терминал (`psql`, команды через `run_terminal_cmd`)
   - ❌ Код из `src/db/pg.ts` для выполнения запросов в чате
   - ❌ Любые другие способы подключения к БД кроме MCP

2. **ОБЯЗАТЕЛЬНО использовать:**
   - ✅ MCP инструменты для работы с БД (автоматически доступны через MCP сервер `postgres`)
   - ✅ MCP сервер автоматически предоставляет инструменты для:
     - Выполнения SQL запросов (`query`)
     - Получения списка таблиц (`list_tables`)
     - Получения схемы таблицы (`describe_table`)

### Примеры правильного использования:

- **Запрос:** "Какие таблицы есть в базе данных?"
  - ✅ **Правильно:** Использовать MCP инструмент для списка таблиц
  - ❌ **Неправильно:** Выполнять `psql -c "\dt"` через терминал

- **Запрос:** "Покажи схему таблицы equipment"
  - ✅ **Правильно:** Использовать MCP инструмент для схемы таблицы
  - ❌ **Неправильно:** Выполнять `psql -c "\d equipment"` через терминал

- **Запрос:** "Сколько записей в таблице equipment?"
  - ✅ **Правильно:** Использовать MCP `query` с SQL `SELECT COUNT(*) FROM equipment`
  - ❌ **Неправильно:** Выполнять `psql -c "SELECT COUNT(*) FROM equipment"` через терминал

- **Запрос:** "Выполни запрос SELECT * FROM equipment LIMIT 10"
  - ✅ **Правильно:** Использовать MCP `query` инструмент
  - ❌ **Неправильно:** Выполнять через `run_terminal_cmd` с psql

### Если MCP сервер недоступен:

Если при попытке использовать MCP инструменты они недоступны:
1. Сообщи пользователю: "MCP сервер PostgreSQL не доступен"
2. Предложи перезапустить Cursor
3. Предложи проверить настройки в `.cursor/mcp.json`
4. **НЕ предлагай** использовать альтернативные способы (psql, код из src/db/pg.ts)

## 

