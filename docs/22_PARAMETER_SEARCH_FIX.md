# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞ –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º (30.12.2025)

## üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–º–µ—Ç–∏–ª, —á—Ç–æ –ø–æ–∏—Å–∫ –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º **–Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**:

```
–ó–∞–ø—Ä–æ—Å: "–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä —Å –≥–ª—É–±–∏–Ω–æ–π –∫–æ–ø–∞–Ω–∏—è –¥–æ 5 –º–µ—Ç—Ä–æ–≤"

SearchQuery:
{
  "text": "—ç–∫—Å–∫–∞–≤–∞—Ç–æ—Ä",
  "category": "–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä",
  "parameters": {
    "–≥–ª—É–±–∏–Ω–∞_–∫–æ–ø–∞–Ω–∏—è_max": 5
  }
}

–†–µ–∑—É–ª—å—Ç–∞—Ç:
‚úÖ –ù–∞–π–¥–µ–Ω–æ: 10 (–°—Ç—Ä–∞—Ç–µ–≥–∏—è: vector)
1. XE210WD - –ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.: 6460 ‚ùå (–±–æ–ª—å—à–µ 5 –º!)
2. XE180WD - –ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.: 5835 ‚ùå (–±–æ–ª—å—à–µ 5 –º!)
3. XE225DN - –ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.: 6680 ‚ùå (–±–æ–ª—å—à–µ 5 –º!)
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–æ–æ–±—â–µ –Ω–µ —Ñ–∏–ª—å—Ç—Ä—É—é—Ç—Å—è!

---

## üêõ –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Vector search –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç parameters

**–ö–æ–¥ –¥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è** (`equipment.repository.ts:305-307`):
```typescript
WHERE embedding IS NOT NULL
  AND is_active = true
ORDER BY embedding <=> $1::vector
```

‚ùå **–ù–ï–¢ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ parameters!**

–≠—Ç–æ –±—ã–ª–∞ —É–∂–µ –∏–∑–≤–µ—Å—Ç–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞ –∏–∑ –∞–Ω–∞–ª–∏–∑–∞ (–ø.7), –Ω–æ –æ–Ω–∞ –Ω–µ –±—ã–ª–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞.

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –Ω–∞–∑–≤–∞–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**LLM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç:**
```json
{
  "–≥–ª—É–±–∏–Ω–∞_–∫–æ–ø–∞–Ω–∏—è_max": 5
}
```

**–í –ë–î —Ö—Ä–∞–Ω–∏—Ç—Å—è:**
```json
{
  "–ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.": 6460
}
```

‚ùå –ò–º–µ–Ω–∞ –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç ‚Üí —Ñ–∏–ª—å—Ç—Ä –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è

**LLM –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ç—Ä—ã:**
```
–≥–ª—É–±–∏–Ω–∞_–∫–æ–ø–∞–Ω–∏—è_max: 5 (–º)
```

**–í –ë–î —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –º–∏–ª–ª–∏–º–µ—Ç—Ä–∞—Ö:**
```
"–ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.": 6460 (–º–º)
```

‚ùå –°—Ä–∞–≤–Ω–µ–Ω–∏–µ `5 <= 6460` –≤—Å–µ–≥–¥–∞ true ‚Üí —Ñ–∏–ª—å—Ç—Ä –±–µ—Å–ø–æ–ª–µ–∑–µ–Ω!

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ:**
```sql
5000 <= 6460  -- 5 –º–µ—Ç—Ä–æ–≤ = 5000 –º–∏–ª–ª–∏–º–µ—Ç—Ä–æ–≤
```

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã –≤ Vector Search

**–§–∞–π–ª:** `src/repository/equipment.repository.ts`

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```typescript
async vectorSearchWithEmbedding(
  queryText: string,
  queryEmbedding: number[],
  limit: number
): Promise<EquipmentSummary[]> {
  // ...
  const sql = `
    WHERE embedding IS NOT NULL
      AND is_active = true
    ORDER BY embedding <=> $1::vector
  `;
}
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```typescript
async vectorSearchWithEmbedding(
  queryText: string,
  queryEmbedding: number[],
  limit: number,
  filters?: {
    category?: string;
    brand?: string;
    region?: string;
    parameters?: Record<string, string | number>;  // ‚Üê –î–û–ë–ê–í–õ–ï–ù–û!
  }
): Promise<EquipmentSummary[]> {
  // –§–æ—Ä–º–∏—Ä—É–µ–º WHERE —É—Å–ª–æ–≤–∏—è
  const whereParts = ["embedding IS NOT NULL", "is_active = true"];
  
  if (filters?.category) whereParts.push(`category = $${params.length}`);
  if (filters?.brand) whereParts.push(`brand = $${params.length}`);
  
  // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º parameters —Å –º–∞–ø–ø–∏–Ω–≥–æ–º –∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–µ–π
  if (filters?.parameters) {
    for (const [key, value] of Object.entries(filters.parameters)) {
      const mapped = ParameterNameMapper.mapParameterName(key);
      const convertedValue = ParameterNameMapper.convertValue(mapped.dbParamName, value);
      
      whereParts.push(
        `(main_parameters->>'${mapped.dbParamName}')::numeric ${operator} ${convertedValue}`
      );
    }
  }
  
  const sql = `
    WHERE ${whereParts.join(" AND ")}
    ORDER BY embedding <=> $1::vector
  `;
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ Vector search —Ç–µ–ø–µ—Ä—å —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ parameters!

---

### 2. –°–æ–∑–¥–∞–Ω ParameterNameMapper

**–§–∞–π–ª:** `src/normalization/parameter-name-mapper.ts` (–Ω–æ–≤—ã–π)

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
1. **–ú–∞–ø–ø–∏–Ω–≥ –∏–º–µ–Ω:** `–≥–ª—É–±–∏–Ω–∞_–∫–æ–ø–∞–Ω–∏—è_max` ‚Üí `–ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.`
2. **–ö–æ–Ω–≤–µ—Ä—Å–∏—è –µ–¥–∏–Ω–∏—Ü:** `5 –º` ‚Üí `5000 –º–º`
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—É—Ñ—Ñ–∏–∫—Å–æ–≤:** `_min`, `_max`

**–ö–∞—Ä—Ç–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π:**
```typescript
private static readonly PARAMETER_MAP = {
  "–≥–ª—É–±–∏–Ω–∞_–∫–æ–ø–∞–Ω–∏—è": "–ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.",
  "–≥–ª—É–±–∏–Ω–∞_–∫–æ–ø–∞–Ω–∏—è_max": "–ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.",
  "–æ–±—ä–µ–º_–∫–æ–≤—à–∞": "–û–±—ä–µ–º –∫–æ–≤—à–∞",
  "–≥—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å": "–ì—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å",
  "–º–æ—â–Ω–æ—Å—Ç—å": "–ú–æ—â–Ω–æ—Å—Ç—å –¥–≤–∏–≥–∞—Ç–µ–ª—è",
  "–≤–µ—Å": "–í–µ—Å –≤ —Ä–∞–±–æ—á–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏",
  "—Ä–∞–±–æ—á–∏–π_–≤–µ—Å": "–†–∞–±–æ—á–∏–π –≤–µ—Å, —Ç.",
  "—Ç–æ–Ω–Ω–∞–∂": "–†–∞–±–æ—á–∏–π –≤–µ—Å, —Ç.",
  // ... –∏ –¥—Ä—É–≥–∏–µ
};
```

**–ö–æ–Ω–≤–µ—Ä—Å–∏—è –µ–¥–∏–Ω–∏—Ü:**
```typescript
private static readonly UNIT_CONVERSIONS = {
  "–ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.": { 
    fromUnit: "–º", 
    toUnit: "–º–º", 
    factor: 1000 
  },
  "–í—ã—Å–æ—Ç–∞ –ø–æ–¥—ä–µ–º–∞": { 
    fromUnit: "–º", 
    toUnit: "–º–º", 
    factor: 1000 
  },
  // ... –∏ –¥—Ä—É–≥–∏–µ
};
```

**API:**
```typescript
// –ú–∞–ø–ø–∏–Ω–≥ –∏–º–µ–Ω–∏
const mapped = ParameterNameMapper.mapParameterName("–≥–ª—É–±–∏–Ω–∞_–∫–æ–ø–∞–Ω–∏—è_max");
// { dbParamName: "–ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.", suffix: "_max" }

// –ö–æ–Ω–≤–µ—Ä—Å–∏—è –∑–Ω–∞—á–µ–Ω–∏—è
const converted = ParameterNameMapper.convertValue("–ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.", 5);
// 5000 (5 –º–µ—Ç—Ä–æ–≤ ‚Üí 5000 –º–∏–ª–ª–∏–º–µ—Ç—Ä–æ–≤)
```

---

### 3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Repository

**–§–∞–π–ª:** `src/repository/equipment.repository.ts`

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```typescript
if (key.endsWith("_min")) {
  const paramKey = key.replace("_min", "");  // ‚ùå –ü—Ä–æ—Å—Ç–∞—è –∑–∞–º–µ–Ω–∞
  whereParts.push(
    `(main_parameters->>$${keyIndex})::numeric >= $${valueIndex}`  // ‚ùå –ò—Å—Ö–æ–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ
  );
}
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```typescript
// –ú–∞–ø–ø–∏–Ω–≥ –∏–º–µ–Ω–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ –æ—Ç LLM –∫ –∏–º–µ–Ω–∏ –≤ –ë–î
const mapped = ParameterNameMapper.mapParameterName(key);
const paramKey = mapped.dbParamName;  // ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è

// –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è
let numValue = Number(value);
numValue = ParameterNameMapper.convertValue(paramKey, numValue);  // ‚úÖ –ö–æ–Ω–≤–µ—Ä—Å–∏—è

whereParts.push(
  `(main_parameters->>'${paramKey}')::numeric ${operator} ${numValue}`
);
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏—â—É—Ç—Å—è –ø–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏–º–µ–Ω–∞–º —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏!

---

### 4. –ü–µ—Ä–µ–¥–∞—á–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏–∑ SearchEngine

**–§–∞–π–ª:** `src/search/search.engine.ts`

**–î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```typescript
vectorPromise = this.performVectorSearch(normalizedQuery.text, limit);
// ‚ùå –§–∏–ª—å—Ç—Ä—ã –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è
```

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
```typescript
const filters = {
  category: normalizedQuery.category,
  brand: normalizedQuery.brand,
  region: normalizedQuery.region,
  parameters: normalizedQuery.parameters,  // ‚úÖ –ü–µ—Ä–µ–¥–∞–µ–º parameters!
};

vectorPromise = this.performVectorSearch(
  normalizedQuery.text, 
  limit, 
  filters  // ‚úÖ –ü–µ—Ä–µ–¥–∞–µ–º —Ñ–∏–ª—å—Ç—Ä—ã
);
```

---

### 5. –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

**–§–∞–π–ª:** `src/repository/equipment.repository.ts`

**–ß—Ç–æ –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è (–ø—Ä–∏ DEBUG=true):**
```
[ParamMapper] –≥–ª—É–±–∏–Ω–∞_–∫–æ–ø–∞–Ω–∏—è_max: 5 –º ‚Üí 5000 –º–º
[VectorSearch] SQL: WHERE ... (main_parameters->>'–ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.')::numeric <= 5000
[VectorSearch] Params: $3=–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä, $4=–ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º., $5=5000
```

**–ó–∞–ø—É—Å–∫ —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º:**
```bash
DEBUG=true npm run chat
```

---

## üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞–Ω —Ç–µ—Å—Ç: `src/scripts/test-parameter-search.ts`

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã: 17/17 PASS (100%)**

```
1Ô∏è‚É£  –ú–∞–ø–ø–∏–Ω–≥ –∏–º–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (7 —Ç–µ—Å—Ç–æ–≤)
‚úÖ –≥–ª—É–±–∏–Ω–∞_–∫–æ–ø–∞–Ω–∏—è_max ‚Üí –ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º._max
‚úÖ –æ–±—ä–µ–º_–∫–æ–≤—à–∞_min ‚Üí –û–±—ä–µ–º –∫–æ–≤—à–∞_min
‚úÖ –≥—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å ‚Üí –ì—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å
‚úÖ –º–æ—â–Ω–æ—Å—Ç—å_–¥–≤–∏–≥–∞—Ç–µ–ª—è ‚Üí –ú–æ—â–Ω–æ—Å—Ç—å –¥–≤–∏–≥–∞—Ç–µ–ª—è
‚úÖ –≤–µ—Å_max ‚Üí –í–µ—Å –≤ —Ä–∞–±–æ—á–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏_max
‚úÖ —Ä–∞–±–æ—á–∏–π_–≤–µ—Å_min ‚Üí –†–∞–±–æ—á–∏–π –≤–µ—Å, —Ç._min
‚úÖ —Ç–æ–Ω–Ω–∞–∂_max ‚Üí –†–∞–±–æ—á–∏–π –≤–µ—Å, —Ç._max

2Ô∏è‚É£  –ö–æ–Ω–≤–µ—Ä—Å–∏—è –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è (5 —Ç–µ—Å—Ç–æ–≤)
‚úÖ –ì–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è: 5 –º ‚Üí 5000 –º–º
‚úÖ –ì–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è: 6.5 –º ‚Üí 6500 –º–º
‚úÖ –í—ã—Å–æ—Ç–∞ –ø–æ–¥—ä–µ–º–∞: 10 –º ‚Üí 10000 –º–º
‚úÖ –û–±—ä–µ–º –∫–æ–≤—à–∞: –±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ (1.5 –º¬≥)
‚úÖ –ì—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å: –±–µ–∑ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ (80 —Ç–æ–Ω–Ω)

3Ô∏è‚É£  –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –µ–¥–∏–Ω–∏—Ü–∞—Ö (2 —Ç–µ—Å—Ç–∞)
‚úÖ –ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.: –º ‚Üí –º–º
‚úÖ –û–±—ä–µ–º –∫–æ–≤—à–∞: –Ω–µ—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

4Ô∏è‚É£  –†–µ–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (3 —Ç–µ—Å—Ç–∞)
‚úÖ "–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä —Å –≥–ª—É–±–∏–Ω–æ–π –∫–æ–ø–∞–Ω–∏—è –¥–æ 5 –º–µ—Ç—Ä–æ–≤"
   SQL: (main_parameters->>'–ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.')::numeric <= 5000
   
‚úÖ "–ö—Ä–∞–Ω –≥—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å—é –±–æ–ª–µ–µ 80 —Ç–æ–Ω–Ω"
   SQL: (main_parameters->>'–ì—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å')::numeric >= 80
   
‚úÖ "–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä —Å –æ–±—ä–µ–º–æ–º –∫–æ–≤—à–∞ –æ—Ç 1.5 –º¬≥"
   SQL: (main_parameters->>'–û–±—ä–µ–º –∫–æ–≤—à–∞')::numeric >= 1.5
```

–ó–∞–ø—É—Å–∫: `npx tsx src/scripts/test-parameter-search.ts`

---

## üìÅ –ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

| –§–∞–π–ª | –ò–∑–º–µ–Ω–µ–Ω–∏—è | –°—Ç—Ä–æ–∫ |
|------|-----------|-------|
| `src/repository/equipment.repository.ts` | +—Ñ–∏–ª—å—Ç—Ä—ã –≤ vector search, +–º–∞–ø–ø–∏–Ω–≥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ | +120 |
| `src/search/search.engine.ts` | +–ø–µ—Ä–µ–¥–∞—á–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤ | +15 |
| `src/normalization/parameter-name-mapper.ts` | –ù–æ–≤—ã–π: –º–∞–ø–ø–µ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ | +130 |
| `src/scripts/test-parameter-search.ts` | –ù–æ–≤—ã–π: —Ç–µ—Å—Ç—ã | +340 |
| `docs/22_PARAMETER_SEARCH_FIX.md` | –ù–æ–≤—ã–π: –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | +400 |

**–ò—Ç–æ–≥–æ:** ~1005 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –¢–µ–ø–µ—Ä—å –ø–æ–∏—Å–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!

**–ó–∞–ø—Ä–æ—Å:** "–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä —Å –≥–ª—É–±–∏–Ω–æ–π –∫–æ–ø–∞–Ω–∏—è –¥–æ 5 –º–µ—Ç—Ä–æ–≤"

```json
{
  "text": "—ç–∫—Å–∫–∞–≤–∞—Ç–æ—Ä",
  "category": "–≠–∫—Å–∫–∞–≤–∞—Ç–æ—Ä",
  "parameters": {
    "–≥–ª—É–±–∏–Ω–∞_–∫–æ–ø–∞–Ω–∏—è_max": 5
  }
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:**

1. **–ú–∞–ø–ø–∏–Ω–≥:** `–≥–ª—É–±–∏–Ω–∞_–∫–æ–ø–∞–Ω–∏—è_max` ‚Üí `–ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.`
2. **–ö–æ–Ω–≤–µ—Ä—Å–∏—è:** `5` –º ‚Üí `5000` –º–º
3. **SQL:** `WHERE (main_parameters->>'–ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.')::numeric <= 5000`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –ù–∞–π–¥–µ–Ω–æ: 3 (–°—Ç—Ä–∞—Ç–µ–≥–∏—è: mixed)
1. XE150WD - –ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.: 4630 ‚úÖ (–º–µ–Ω—å—à–µ 5000)
2. XE60WD - –ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.: 3520 ‚úÖ (–º–µ–Ω—å—à–µ 5000)
3. –ú–∞–ª—ã–π —ç–∫—Å–∫–∞–≤–∞—Ç–æ—Ä - –ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.: 4800 ‚úÖ (–º–µ–Ω—å—à–µ 5000)
```

‚ùå **–ù–µ –≤–µ—Ä–Ω—É–ª–∏—Å—å:**
- XE210WD - 6460 –º–º (–±–æ–ª—å—à–µ 5000)
- XE180WD - 5835 –º–º (–±–æ–ª—å—à–µ 5000)  
- XE225DN - 6680 –º–º (–±–æ–ª—å—à–µ 5000)

---

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

### 1. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–∞–ø–ø–∏–Ω–≥
‚úÖ –í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω–∏—è ‚Üí –æ–¥–Ω–æ –∏–º—è –≤ –ë–î:
- `–≥–ª—É–±–∏–Ω–∞_–∫–æ–ø–∞–Ω–∏—è`, `–º–∞–∫—Å_–≥–ª—É–±–∏–Ω–∞_–∫–æ–ø–∞–Ω–∏—è` ‚Üí `–ú–∞–∫—Å. –≥–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è, –º–º.`
- `–≤–µ—Å`, `–º–∞—Å—Å–∞`, `—Ä–∞–±–æ—á–∏–π_–≤–µ—Å`, `—Ç–æ–Ω–Ω–∞–∂` ‚Üí –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–ª–µ

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Å–∏—è
‚úÖ LLM —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –µ–¥–∏–Ω–∏—Ü–∞–º–∏ (–º–µ—Ç—Ä—ã, —Ç–æ–Ω–Ω—ã)
‚úÖ –ë–î —Ö—Ä–∞–Ω–∏—Ç –≤ —É–¥–æ–±–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü–∞—Ö (–º–∏–ª–ª–∏–º–µ—Ç—Ä—ã)
‚úÖ –ö–æ–Ω–≤–µ—Ä—Å–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### 3. –†–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ
‚úÖ FTS search (fullTextSearch)
‚úÖ Vector search (vectorSearchWithEmbedding)
‚úÖ Hybrid search (RRF)

### 4. –õ–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è
–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä:
```typescript
// –í PARAMETER_MAP
"–≤—ã—Å–æ—Ç–∞_—Å—Ç—Ä–µ–ª—ã": "–í—ã—Å–æ—Ç–∞ —Å—Ç—Ä–µ–ª—ã, –º–º.",

// –í UNIT_CONVERSIONS (–µ—Å–ª–∏ –Ω—É–∂–Ω–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏—è)
"–í—ã—Å–æ—Ç–∞ —Å—Ç—Ä–µ–ª—ã, –º–º.": { fromUnit: "–º", toUnit: "–º–º", factor: 1000 }
```

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:

1. **–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤** - –æ–±–Ω–æ–≤–∏—Ç–µ `PARAMETER_MAP`
2. **–ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ –¥—Ä—É–≥–∏—Ö–µ–¥–∏–Ω–∏—Ü–∞—Ö** - –¥–æ–±–∞–≤—å—Ç–µ –≤ `UNIT_CONVERSIONS`
3. **–í–∫–ª—é—á–∞–π—Ç–µ DEBUG** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏: `DEBUG=true npm run chat`

### –î–ª—è LLM –ø—Ä–æ–º–ø—Ç–æ–≤:

–û–±–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ–º–ø—Ç—ã, —á—Ç–æ–±—ã LLM –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –ø–æ–Ω—è—Ç–Ω—ã–µ –∏–º–µ–Ω–∞:
```
–ò—Å–ø–æ–ª—å–∑—É–π –†–£–°–°–ö–ò–ï –Ω–∞–∑–≤–∞–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤:
- "–≥–ª—É–±–∏–Ω–∞_–∫–æ–ø–∞–Ω–∏—è" –¥–ª—è –≥–ª—É–±–∏–Ω—ã –∫–æ–ø–∞–Ω–∏—è
- "–æ–±—ä–µ–º_–∫–æ–≤—à–∞" –¥–ª—è –æ–±—ä–µ–º–∞ –∫–æ–≤—à–∞
- "–≥—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å" –¥–ª—è –≥—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç–∏
- "–º–æ—â–Ω–æ—Å—Ç—å" –¥–ª—è –º–æ—â–Ω–æ—Å—Ç–∏ –¥–≤–∏–≥–∞—Ç–µ–ª—è
- "–≤–µ—Å" –¥–ª—è –≤–µ—Å–∞

–ò—Å–ø–æ–ª—å–∑—É–π –ß–ï–õ–û–í–ï–ß–ï–°–ö–ò–ï –µ–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è:
- –ì–ª—É–±–∏–Ω–∞ –∫–æ–ø–∞–Ω–∏—è –≤ –ú–ï–¢–†–ê–• (5, –∞ –Ω–µ 5000)
- –í–µ—Å –≤ –¢–û–ù–ù–ê–• (20, –∞ –Ω–µ 20000)
- –ú–æ—â–Ω–æ—Å—Ç—å –≤ –ö–ò–õ–û–í–ê–¢–¢–ê–• –∏–ª–∏ –õ–û–®–ê–î–ò–ù–´–• –°–ò–õ–ê–•
```

---

## ‚ú® –ò—Ç–æ–≥–∏

**–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é:**
- ‚úÖ Vector search —Ç–µ–ø–µ—Ä—å —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ parameters
- ‚úÖ –ò–º–µ–Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –º–∞–ø–ø—è—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ 17 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤ (100% pass)
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–ü–æ–∏—Å–∫ –ø–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** üéâ

