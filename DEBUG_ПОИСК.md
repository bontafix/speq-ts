# DEBUG: ÐšÐ°Ðº Ð¿Ñ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¿Ð¾Ð¸ÑÐº Ð¿Ð¾ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð°Ð¼

## Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ ÑÑ‚Ð°Ñ€Ñ‚

```bash
# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ DEBUG ÑÐºÑ€Ð¸Ð¿Ñ‚ (Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚ JSON Ð¸ SQL)
node -r dotenv/config -r ts-node/register src/scripts/test-search-with-debug.ts
```

## Ð§Ñ‚Ð¾ Ð¿Ð¾ÐºÐ°Ð·Ñ‹Ð²Ð°ÐµÑ‚

### âœ… ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº Ð‘Ð”
```
âœ… Ð‘Ð” Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð° ÑƒÑÐ¿ÐµÑˆÐ½Ð¾
ðŸ“Š ÐžÐ±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ Ð² Ð‘Ð”: 844
ðŸ“š ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ð¾Ð² Ð² ÑÐ»Ð¾Ð²Ð°Ñ€Ðµ: 47
```

### âœ… JSON Ð¿Ð¾ÑÐ»Ðµ Ð½Ð¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸
```json
ðŸŸ¢ JSON ÐŸÐžÐ¡Ð›Ð• ÐÐžÐ ÐœÐÐ›Ð˜Ð—ÐÐ¦Ð˜Ð˜:
{
  "text": "ÑÐºÑÐºÐ°Ð²Ð°Ñ‚Ð¾Ñ€",
  "parameters": {
    "nominal_power_kw_min": 73.6,
    "weight_t_max": 25
  }
}
```

### âœ… SQL Ð·Ð°Ð¿Ñ€Ð¾Ñ
```sql
SELECT id, name, category, brand, price, main_parameters
FROM equipment
WHERE is_active = true
  AND search_vector @@ plainto_tsquery('russian', 'ÑÐºÑÐºÐ°Ð²Ð°Ñ‚Ð¾Ñ€')
  AND (main_parameters->>'nominal_power_kw')::numeric >= 73.6
  AND (main_parameters->>'weight_t')::numeric <= 25
LIMIT 5;
```

### âœ… Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°
```
ðŸ“Š Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°:
   Ð’ÑÐµÐ³Ð¾: 2
   ÐÐ¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ð¾: 2
   ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ: 0
   Ð£ÑÐ¿ÐµÑˆÐ½Ð¾ÑÑ‚ÑŒ: 100.0%
```

## Ð§Ñ‚Ð¾ Ð¸ÑÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾

### 1. âœ… ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº Ð‘Ð”
**Ð‘Ñ‹Ð»Ð¾:** `.env` Ð½Ðµ Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°Ð»ÑÑ  
**Ð¡Ñ‚Ð°Ð»Ð¾:** Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÐ¼ `node -r dotenv/config`

### 2. âœ… Ð•Ð´Ð¸Ð½Ð¸Ñ†Ñ‹ Ð¸Ð·Ð¼ÐµÑ€ÐµÐ½Ð¸Ñ
**Ð‘Ñ‹Ð»Ð¾:** Ð ÑƒÑÑÐºÐ¸Ðµ "Ñ‚", "ÐºÐ’Ñ‚" Ð½Ðµ ÐºÐ¾Ð½Ð²ÐµÑ€Ñ‚Ð¸Ñ€Ð¾Ð²Ð°Ð»Ð¸ÑÑŒ  
**Ð¡Ñ‚Ð°Ð»Ð¾:** ÐžÐ±Ð½Ð¾Ð²Ð»ÐµÐ½Ñ‹ Ð½Ð° "t", "kw"

**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:**
```
"25000 ÐºÐ³" â†’ 25 Ñ‚     âœ…
"100 Ð».Ñ." â†’ 73.6 ÐºÐ’Ñ‚ âœ…  
```

### 3. âœ… Ð’Ð°Ð»Ð¸Ð´Ð°Ñ†Ð¸Ñ Ð´Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½Ð¾Ð²
**Ð‘Ñ‹Ð»Ð¾:** ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð¾Ñ‚Ð±Ñ€Ð°ÑÑ‹Ð²Ð°Ð»Ð¸ÑÑŒ  
**Ð¡Ñ‚Ð°Ð»Ð¾:** Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð¿Ñ€ÐµÐ´ÑƒÐ¿Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ðµ

**Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:** Ð£ÑÐ¿ÐµÑˆÐ½Ð¾ÑÑ‚ÑŒ 100%

## Ð¢ÐµÐºÑƒÑ‰Ð°Ñ Ð¿Ñ€Ð¾Ð±Ð»ÐµÐ¼Ð°

### âš ï¸ ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð² Ð‘Ð” Ð½Ðµ Ð½Ð¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð¾Ð²Ð°Ð½Ñ‹

**Ð’ Ð‘Ð”:**
```
"ÐœÐ¾Ñ‰Ð½Ð¾ÑÑ‚ÑŒ Ð´Ð²Ð¸Ð³Ð°Ñ‚ÐµÐ»Ñ, Ð».Ñ."  â† Ð¸ÑÑ…Ð¾Ð´Ð½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ âŒ
"Ð Ð°Ð±Ð¾Ñ‡Ð°Ñ Ð¼Ð°ÑÑÐ° (ÐºÐ³)"        â† Ð¸ÑÑ…Ð¾Ð´Ð½Ñ‹Ð¹ Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ âŒ
```

**ÐžÐ¶Ð¸Ð´Ð°ÐµÑ‚ÑÑ:**
```
"nominal_power_kw"  â† canonical Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ âœ…
"weight_t"          â† canonical Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚ âœ…
```

**Ð ÐµÑˆÐµÐ½Ð¸Ðµ:** ÐÐ¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² Ð‘Ð”:
```bash
npm run normalize:parameters
```

## Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ ÑÐ²Ð¾Ð¹ Ñ‚ÐµÑÑ‚

ÐžÑ‚Ñ€ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ `src/scripts/test-search-with-debug.ts`:

```typescript
const testQueries = [
  {
    name: 'ÐœÐ¾Ð¹ Ñ‚ÐµÑÑ‚',
    query: {
      text: 'ÐºÑ€Ð°Ð½',
      parameters: {
        'Ð“Ñ€ÑƒÐ·Ð¾Ð¿Ð¾Ð´ÑŠÐµÐ¼Ð½Ð¾ÑÑ‚ÑŒ_min': '10 Ñ‚Ð¾Ð½Ð½',
        'Ð’Ñ‹ÑÐ¾Ñ‚Ð° Ð¿Ð¾Ð´ÑŠÐµÐ¼Ð°_max': '50 Ð¼',
      },
      limit: 5,
    },
  },
  // ... Ð´Ñ€ÑƒÐ³Ð¸Ðµ Ñ‚ÐµÑÑ‚Ñ‹
];
```

## CLI Ñ DEBUG

```bash
# Ð”Ð¾Ð±Ð°Ð²Ð¸Ñ‚ÑŒ Ð² .env
DEBUG=1

# Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ
npm run start
```

## ÐŸÑ€Ð¾Ð²ÐµÑ€Ð¸Ñ‚ÑŒ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹ Ð² Ð‘Ð”

```sql
-- ÐšÐ°ÐºÐ¸Ðµ ÐºÐ»ÑŽÑ‡Ð¸ ÐµÑÑ‚ÑŒ Ð² main_parameters?
SELECT DISTINCT jsonb_object_keys(main_parameters) 
FROM equipment 
WHERE category = 'ÐšÑ€Ð°Ð½Ñ‹'
LIMIT 20;

-- Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ Ð¾Ð±Ð¾Ñ€ÑƒÐ´Ð¾Ð²Ð°Ð½Ð¸Ñ Ð¸Ð¼ÐµÐµÑ‚ ÐºÐ¾Ð½ÐºÑ€ÐµÑ‚Ð½Ñ‹Ð¹ Ð¿Ð°Ñ€Ð°Ð¼ÐµÑ‚Ñ€?
SELECT COUNT(*) 
FROM equipment 
WHERE main_parameters ? 'nominal_power_kw';
```

## ÐŸÐ¾Ð»Ð½Ð°Ñ Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð°Ñ†Ð¸Ñ

- `docs/24_PARAMETER_SEARCH_DEBUG_REPORT.md` - Ð”ÐµÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¾Ñ‚Ñ‡Ñ‘Ñ‚
- `ÐŸÐžÐ˜Ð¡Ðš_ÐŸÐž_ÐŸÐÐ ÐÐœÐ•Ð¢Ð ÐÐœ.md` - Ð ÑƒÐºÐ¾Ð²Ð¾Ð´ÑÑ‚Ð²Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ
- `ÐŸÐ ÐžÐ’Ð•Ð ÐšÐ_ÐÐžÐ ÐœÐÐ›Ð˜Ð—ÐÐ¦Ð˜Ð˜.md` - Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸

## Ð˜Ñ‚Ð¾Ð³

âœ… **ÐÐ¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð½Ð° 100%**  
âœ… **JSON Ð¸ SQL Ð²Ñ‹Ð²Ð¾Ð´ÑÑ‚ÑÑ**  
âš ï¸ **ÐÑƒÐ¶Ð½Ð¾ Ð½Ð¾Ñ€Ð¼Ð°Ð»Ð¸Ð·Ð¾Ð²Ð°Ñ‚ÑŒ Ð´Ð°Ð½Ð½Ñ‹Ðµ Ð² Ð‘Ð”**

